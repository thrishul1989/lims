<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="renderer" content="webkit">
<meta http-equiv="Cache-Control" content="no-siteapp" />
<title>科技订单创建</title>
<!--[if lt IE 9]>
    <meta http-equiv="refresh" content="0;ie.html" />
    <![endif]-->
<link href="${system_css}/bootstrap.min14ed.css?v=3.3.6"
	rel="stylesheet">
<link href="${system_css}/font-awesome.min93e3.css?v=4.4.0"
	rel="stylesheet">
<link href="${system_css}/animate.min.css" rel="stylesheet">
<link href="${system_css}/style.min862f.css?v=4.1.0" rel="stylesheet">
<link href="${system_css}/lims.css?v=4.1.0" rel="stylesheet">
<link href="${system_css}/fileinput.min.css" rel="stylesheet">
<link href="${system_css}/magicsuggest-min.css" rel="stylesheet">
<link href="${system_css}/product.css" rel="stylesheet">
<link href="${system_css}/bootstrap-select.min.css" rel="stylesheet">

<script type="text/javascript" src="${system_js}/jquery.min.js?v=2.1.4"></script>
<script type="text/javascript" src="${system_js}/bootstrap.min.js"></script>
<script src="${system_js}/bootstrap-suggest.js"></script>
<script src="${system_js}/jquery.form.js"></script>
<script src="${system_js}/magicsuggest-min.js"></script>
<script type="text/javascript" src="${plugins}/validation/jquery.validate.min.js"></script>
<script type="text/javascript" src="${plugins}/validation/additional-methods.min.js"></script>
<script type="text/javascript" src="${plugins}/validation/localization/messages_zh.min.js"></script>
<script type="text/javascript" src="${system_js}/system.js"></script>
<script src="${plugins}/laydate/laydate.js"></script>
<script src="${plugins}/layer/layer.min.js"></script>
<script type="text/javascript" src="${system_js}/myValidate.js"></script>
<script src="${system_js}/bootstrap-fileinput-master/js/fileinput.js"></script>
<script src="${system_js}/bootstrap-fileinput-master/js/zh.js"></script>
<script src="${system_js}/bootstrap-select.js"></script>

<script>
	var system_images = "${system_images}";
	var base = "${base}";
	var sampleList = ${sampleList};
	var searcher = ${searcher};

</script>
<script src="${system_js}/order/researchorder.js"></script>




<style>

.file-drop-zone {
	height: auto
}

.t .ms-sel-ctn {
	background-position: 98%
}
</style>
</head>
<body class="gray-bg">
	<div class="wrapper wrapper-content animated fadeInRight">
		<div class="row">
			<div class="col-lg-12">
				<div class="ibox">
					<div class="ibox-title">
						<ol class="breadcrumb">
							<li>创建订单</li>
							<div style="float: right;">
								<a href="${base}/order/paging.do" target="_self"
									style="padding: 0px; position: relative; right: 16px; float: right">
									<img src="${system_images}/backbtn.png" style="height: 24px;" />
								</a>
							</div>
						</ol>
					</div>
				</div>
				<div class="ibox ibox-table">
					<div class="ibox-title">
						<strong>科研订单</strong>
						<a class="btn btn-sm btn-success" data-toggle="modal" data-target="#myModal"> <i
									class="fa fa fa-folder-open-o"></i> 导入科研样本
						</a>
					</div>
					<div class="ibox-content">
						<form id="orderForm" class="form-horizontal m-t" action=""
							method="post" enctype='application/json'>


							<fieldset>
								<div class="panel-group" id="accordion">
									<div class="panel panel-default" >
										<div class="panel-heading">
											<h4 class="panel-title">
												<a data-toggle="collapse" href="#collapseOne"> 订单基本信息 </a>
											</h4>
										</div>
										<div id="collapseOne" class="panel-collapse collapse in">

											<div class="ibox-content">
												<div class="form-group">

													<label class="col-sm-2 control-label control-required">订单编号：</label>
													<div class="col-sm-3">
														<input type="text" class="form-control" name="orderCode"
															id="orderCode" value="" readonly="readonly"  placeholder="系统自动生成" />
													</div>

													<label class="col-sm-2 control-label control-required">归属合同：</label>
													<div class="col-sm-3">
														<div class="form-control" id="hetong"
															placeholder="请选择归属合同"></div>
													</div>

												</div>
												
												<div class="form-group">

													<label class="col-sm-2 control-label control-required">客户：</label>
													<div class="col-sm-3">
														  <div class="form-control" id="ownerId" placeholder="请选择客户"></div>
													</div>

													    <label class="col-sm-2 control-label control-required">业务员：</label>
														<div class="col-sm-3">
														  <input type="text" class="form-control" name="creatorName" id="creatorName"
														   placeholder="根据客户自动关联显示"  readonly="readonly" /> 
														   <input type="hidden" name="creatorId" id="creatorId" readonly="readonly">
														</div>
												</div>

												<div class="form-group">
													<label class="col-sm-2 control-label control-required">项目管理人：</label>
													<div class="col-sm-3">
														<div class="form-control" id="prjManager" placeholder="请选择项目管理人"></div>
														<input type="hidden" name="projectManager" id='projectManager' value="${(appsaleman.projectManager)!}" />
													</div>
												</div>

											</div>
										</div>
									</div>


									
									<div class="panel panel-default groupPanel"  data-id="1">
									
										<button type="button" onclick="addgroup(this);"
                                                    style="float:right; margin-top: 10px; margin-right: 35px;"
													class="btn btn-sm btn-success addBtn" > <i
													class="fa fa-plus"></i> 新增分组
												</button>
												
										<a data-toggle="collapse" href="#collapseThree"></a>	
										<div class="panel-heading" style="background-color: rgb(245, 245, 245);height: auto;overflow: hidden;">
										<div class="col-sm-2"><input type="text" value="默认组" class="form-control" placeholder="请输入组名" name="groupName"></div>
											
												
											
										</div>
										<div id="collapseThree" class="panel-collapse collapse in">

											<div class="ibox-title">
												
												<a  onclick="addMain(this)"
													style="position: relative; bottom: 11px"
													class="btn btn-sm btn-success " > 
													 新增样本
												</a>
											</div>


											<div class="ibox-content" id="mainContent" >
												<div class="mainGroup" style="display: none">

													<div class="form-group">

														<label class="col-sm-2 control-label control-required">样本编号：</label>
														<div class="col-sm-3">
															<input type="text" class="form-control"
																name="mainSampleCode" value="" />
														</div>

														<label class="col-sm-2 control-label control-required">样本类型：</label>
														<div class="col-sm-3">
															<select class="form-control" name="mainSampleType" onchange="showUnit(this)">
																<option value="">请选择样本类型</option> <#if sample?has_content> <#list
																sample as record>
																<option value="${record.id}" <#if  record.receivingUnit!=''> unit=${record.receivingUnit!?html}</#if> >${record.name!?html}</option>
																</#list></#if>
															</select>
														</div>

													</div>

													<div class="form-group">
														<label class="col-sm-2 control-label control-required">样本名称：</label>
														<div class="col-sm-3">
															<input type="text" class="form-control"
																name="mainSampleName" value="" />
														</div>

														<label class="col-sm-2 control-label control-required">样本量：</label>
														<div class="col-sm-3">
															<input type="text" class="form-control"
																name="mainSampleSize" value="" />
														</div>
														
													</div>
													
													<div class="form-group">
														<label class="col-sm-2 control-label ">采样时间：</label>
														<div class="col-sm-3">
															<input type="text" class="form-control laydate-icon " 
																name="sampleDate" id="sampleDate" value="" readonly="readonly"
																style="height: 34px"
																onclick="laydate({istime: true, format: 'YYYY-MM-DD' ,max: laydate.now()})" />
														</div>
														
														<label class="col-sm-2 control-label ">备注：</label>
														<div class="col-sm-3">
															<input type="text" class="form-control"
																name="remark" value="" />
														</div>
													</div>
													
													<div class="form-group">
														<label class="col-sm-2 control-label ">临床诊断：</label>
														<div class="col-sm-3">
															<input type="text" class="form-control"
																name="orderExamineeDiagnosis" value="" />
														</div>

														<label class="col-sm-2 control-label ">家系关系：</label>
														<div class="col-sm-3">
															<input type="text" class="form-control"
																name="familyRelation" value="" />
														</div>

														

													</div>
													
													
													
													<div class="form-group">
													
														<label class="col-sm-2 control-label ">重点关注基因：</label>
														<div class="col-sm-3">
															<input type="text" class="form-control"
																name="orderExamineeGene" value="" />
														</div>
														<label class="col-sm-2 control-label control-required">检测产品：</label>
														<div class="col-sm-3">
															<div class="form-control testProduct" id="testProduct" 
																placeholder="请选择检测产品"></div>
														</div>
													</div>

													<DIV style="BORDER-TOP: #adadad 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></DIV>
												</div>
											</div>
											

										</div>

									</div>
									
									
									
									<div class="panel panel-default tag">
										<div class="panel-heading">
											<h4 class="panel-title">
												<a data-toggle="collapse" href="#123"> 收件人信息 </a>
											</h4>
										</div>
										<div id="123" class="panel-collapse collapse in">

											<div class="ibox-content">
												<div class="form-group">

													<label class="col-sm-2 control-label control-required">收件人姓名：</label>
													<div class="col-sm-3">
														<input type="text" class="form-control"
															name="recipientName" id="recipientName" value="" />
													</div>

													<label class="col-sm-2 control-label control-required">收件人联系方式：</label>
													<div class="col-sm-3">
														<input type="text" class="form-control"
															name="recipientPhone" id="recipientPhone" value="" />
													</div>

												</div>

												<div class="form-group">


													<label class="col-sm-2 control-label control-required">报告邮寄地址：</label>
													<div class="col-sm-3">
														<input type="text" class="form-control"
															name="recipientAddress" id="recipientAddress" value="" />
													</div>

													
													<!-- <label class="col-sm-2 control-label ">发票抬头：</label>
													<div class="col-sm-3">
														<input type="text" class="form-control"
															name="invoiceTitle" id="invoiceTitle" value="" />
													</div> -->
												</div>

											</div>
										</div>

									</div>	
									
									

								<div class="form-group">
									<div class="col-sm-4 col-sm-offset-2">
								
										<input type="submit"  class="btn btn-primary" value="提交订单"  id="createButton"/>
										<button class="btn btn-primary goback" type="button" >返回</button>
										
									</div>
									<div class="col-sm-4 col-sm-offset-2"></div>
									<div class="col-sm-4 col-sm-offset-2"></div>
								</div>

								</div>

							</fieldset>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
	</div>
	</div>




	<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
		aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
					<h4 class="modal-title" id="myModalLabel">Excel导入</h4>
				</div>
				<form action="${base}/order/uploadSearcherSample.do" method="post" name="uploadForm"
					enctype="multipart/form-data" id="uploadForm">
					<div class="modal-body">
						<input type="file" id="uploadData" name="uploadData" accept=".xlsx,.xls" />
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
						<button type="button" class="btn btn-primary" onclick="checkedForm()">提交</button>
					</div>
				</form>
			</div>
			<!-- /.modal-content -->
		</div>
		<!-- /.modal -->
	</div>

<!-- clone用 -->
<div style="display: none">
<div class="panel panel-default clone"  data-id="1">
<img src="${system_images}/rubish.png" style="float: right;cursor: pointer;margin-top: 14px;margin-right: 35px;" onclick="removeGroup(this)"/>
		<button type="button" onclick="addgroup(this);"
                                            style="float:right; margin-top: 10px; margin-right: 35px;"
					class="btn btn-sm btn-success addBtn" > <i
					class="fa fa-plus"></i> 新增分组
	    </button>
		<a data-toggle="collapse" href="#collapseThree"></a>
		<div class="panel-heading" style="background-color: rgb(245, 245, 245);height: auto;overflow: hidden;">
			<div class="col-sm-2"><input type="text" class="form-control" placeholder="请输入组名" name="groupName"></div>
		</div>
		<div id="collapseThree" class="panel-collapse collapse in">

			<div class="ibox-title">
				
				<a  onclick="addMain(this)"
					style="position: relative; bottom: 11px"
					class="btn btn-sm btn-success " > 
					 新增样本
				</a>
			</div>


			<div class="ibox-content" id="mainContent">
				<div class="mainGroup">

					<div class="form-group">

						<label class="col-sm-2 control-label control-required">样本编号：</label>
						<div class="col-sm-3">
							<input type="text" class="form-control"
								name="mainSampleCode" id="searchCode" value="" />
						</div>

						<label class="col-sm-2 control-label control-required">样本类型：</label>
						<div class="col-sm-3">
							<select class="form-control" name="mainSampleType" onchange="showUnit(this)">
								<option value="">请选择样本类型</option> <#if sample?has_content> <#list
								sample as record>
								<option value="${record.id}" <#if  record.receivingUnit!=''> 
								unit=${record.receivingUnit!?html}</#if> >${record.name!?html}</option>
								</#list></#if>
							</select>
						</div>

					</div>

					<div class="form-group">
						<label class="col-sm-2 control-label control-required">样本名称：</label>
						<div class="col-sm-3">
							<input type="text" class="form-control"
								name="mainSampleName" value="" />
						</div>

						<label class="col-sm-2 control-label control-required">样本量：</label>
						<div class="col-sm-3">
							<input type="text" class="form-control"
								name="mainSampleSize" value="" />
						</div>
						
					</div>
					
					<div class="form-group">
						<label class="col-sm-2 control-label ">采样时间：</label>
						<div class="col-sm-3">
							<input type="text" class="form-control laydate-icon " 
								name="sampleDate" value="" readonly="readonly"
								style="height: 34px"
								onclick="laydate({istime: true, format: 'YYYY-MM-DD' ,max: laydate.now()})" />
						</div>
						
						 <label class="col-sm-2 control-label ">备注：</label>
						<div class="col-sm-3">
								<input type="text" class="form-control"
									name="remark" value="" />
						</div> 
					
					</div>
					
					<div class="form-group">

						<label class="col-sm-2 control-label ">临床诊断：</label>
						<div class="col-sm-3">
							<input type="text" class="form-control"
								name="orderExamineeDiagnosis" value="" />
						</div>

					
						<label class="col-sm-2 control-label ">家系关系：</label>
						<div class="col-sm-3">
							<input type="text" class="form-control"
								name="familyRelation" value="" />
						</div>

					</div>
					
					
					
					<div class="form-group">
					
						<label class="col-sm-2 control-label ">重点关注基因：</label>
						<div class="col-sm-3">
							<input type="text" class="form-control"
								name="orderExamineeGene" value="" />
						</div>
						<label class="col-sm-2 control-label control-required">检测产品：</label>
						<div class="col-sm-3">
							<div class="form-control testProduct" 
								placeholder="请选择检测产品"></div>
						</div>
					</div>

					<DIV style="BORDER-TOP: #adadad 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></DIV>
				</div>
			</div>
			

		</div>

	</div>
	
	
	
	
	<div class="panel panel-default groupTag"  data-id="1">
			<img src="${system_images}/rubish.png" style="float: right;cursor: pointer;margin-top: 14px;margin-right: 35px;" 
			onclick="removeGroup(this)"  title="至少保留一个组"/>
					<button type="button" onclick="addgroup(this);"
                                               style="float:right; margin-top: 10px; margin-right: 35px;"
								class="btn btn-sm btn-success addBtn" > <i
								class="fa fa-plus"></i> 新增分组
					</button>
					<a data-toggle="collapse" href="#collapseThree"><div class="panel-heading" style="background-color: rgb(245, 245, 245);height: auto;overflow: hidden;">
					<div class="col-sm-2"><input type="text" class="form-control" placeholder="请输入组名" name="groupName"></div>
												
					</div></a>
					<div id="collapseThree" class="panel-collapse collapse in">

						<div class="ibox-title">
							
							<a  onclick="addMain(this)"
								style="position: relative; bottom: 11px"
								class="btn btn-sm btn-success " > 
								 新增样本
							</a>
						</div>


						<div class="ibox-content" id="mainContent">
							
						</div>
						

					</div>

	</div><!-- 分组colne -->
	
	
	<!-- 	样本clone		 -->
	<div class="sampleTag">
	<img src="${system_images}/rubish.png" style="float: right;cursor: pointer;" onclick="removeMain(this)"/>
			<div class="form-group">
				<label class="col-sm-2 control-label control-required">样本编号：</label>
				<div class="col-sm-3">
					<input type="text" class="form-control"
						name="mainSampleCode" value="" />
				</div>

				<label class="col-sm-2 control-label control-required">样本类型：</label>
				<div class="col-sm-3">
					<select class="form-control" name="mainSampleType">
						<option value="">请选择样本类型</option> <#if sample?has_content> <#list
						sample as record>
						<option value="${record.id}">${record.name!?html}</option>
						</#list></#if>
					</select>
				</div>

			</div>

			<div class="form-group">

				<label class="col-sm-2 control-label control-required">样本名称：</label>
				<div class="col-sm-3">
					<input type="text" class="form-control"
						name="mainSampleName" value="" />
				</div>
				
				<label class="col-sm-2 control-label control-required">样本量：</label>
				<div class="col-sm-3">
					<input type="text" class="form-control"
						name="mainSampleSize" value="" />
				</div>


			</div>
			
			<div class="form-group">
					<label class="col-sm-2 control-label ">采样时间：</label>
					<div class="col-sm-3">
						<input type="text" class="form-control laydate-icon " 
							name="sampleDate" id="sampleDate" value="" readonly="readonly"
							style="height: 34px"
							onclick="laydate({istime: true, format: 'YYYY-MM-DD' ,max: laydate.now()})" />
					</div>
					
					
					<label class="col-sm-2 control-label ">备注：</label>
						<div class="col-sm-3">
							<input type="text" class="form-control"
								name="remark" value="" />
					</div>
			</div>
			
			<div class="form-group">

				<label class="col-sm-2 control-label ">临床诊断：</label>
				<div class="col-sm-3">
					<input type="text" class="form-control"
						name="orderExamineeDiagnosis" value="" />
				</div>		
				<label class="col-sm-2 control-label ">家系关系：</label>
				<div class="col-sm-3">
					<input type="text" class="form-control"
						name="familyRelation" value="" />
				</div>


			</div>
			
			
			
			<div class="form-group">
			
				<label class="col-sm-2 control-label ">重点关注基因：</label>
				<div class="col-sm-3">
					<input type="text" class="form-control"
						name="orderExamineeGene" value="" />
				</div>
				
				<label class="col-sm-2 control-label control-required">检测产品：</label>
				<div class="col-sm-3">
					<div class="form-control testProduct" 
						placeholder="请选择检测产品"></div>
				</div>
			</div>

			<DIV style="BORDER-TOP: #adadad 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></DIV>
		</div><!-- 样本colne -->
	
</div>

</body>


</html>
