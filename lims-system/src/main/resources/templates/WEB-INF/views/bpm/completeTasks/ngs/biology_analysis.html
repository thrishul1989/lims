<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>实验室管理系统-收藏页面</title>
    <meta name="viewport"
          content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1">
    <meta name="format-detection" content="telephone=no,email=no">
    <meta http-equiv="Cache-Control" content="no-store" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="HandheldFriendly" content="true">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <link rel="stylesheet"
          href="https://cdn.bootcss.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css"
          integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb"
          crossorigin="anonymous">
    <link
            href="http://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"
            rel="stylesheet">
    <link
            href="http://cdn.bootcss.com/pickadate.js/3.5.6/compressed/themes/classic.css"
            rel="stylesheet">
    <link
            href="http://cdn.bootcss.com/pickadate.js/3.5.6/compressed/themes/classic.date.css"
            rel="stylesheet">
    <link href="${system_css}/bootstrap-table.min.css" rel="stylesheet">
    <link href="https://cdn.bootcss.com/viewerjs/1.0.0-beta.2/viewer.min.css" rel="stylesheet">
    <link href="${plugins}/layer/skin/layer.css" rel="stylesheet">
    <link rel="stylesheet" href="${system_css}/common.css">
    <link rel="stylesheet" href="${system_css}/modules.css">
    <link rel="stylesheet" href="${system_css}/style.css">
    <link href="${system_css}/magicsuggest-min.css" rel="stylesheet">
    <link href="${system_css}/node-bar.css" rel="stylesheet">
    <link href="${system_css}/system.css?v=0.1" rel="stylesheet">

    <style>
        .my-table1 thead th {
            max-width: 4.2rem;
            min-width: 3.5rem;
            padding: .375rem;
        }

        .my-table2 thead {
            text-align: center;
        }

        .my-table2 thead:first-child th {
            border-right: 1px solid #ddd;
            border-bottom: 1px solid #ddd;
        }

        .my-table2 thead:first-child th:last-child {
            border-right: none;
        }

        .my-table2 thead th:nth-child(4n + 4) {
            border-right: 1px solid #ddd;
        }

        .my-table2 tbody td:nth-child(4n + 4) {
            border-right: 1px solid #ddd;
        }

        .table-striped thead {
            background-color: rgba(0, 0, 0, .05);
        }

        .table-striped tbody tr:nth-of-type(even) {
            background-color: rgba(0, 0, 0, .05);
        }

        .table-striped tbody tr:nth-of-type(odd) {
            background-color: transparent;
        }

        #dataTableBox table {
            width: auto;
            white-space: nowrap;
            font-size: 12px;
        }

        #dataTableBox table th {
            text-align: center
        }

        #dataTableBox table th, #dataTableBox table td {padding-top：0;
            padding-bottom: 0;
            height: 40px;
            vertical-align: middle;
            text-align: center;
        }

        .evidenceTable th.evidence {
            display: none;
        }

        #exampleModalLong td {
            word-break: break-all;
        }

        .modal-body th {
            background-color: white
        }

        .sys-info-table th, .sys-info-table .table-active, .sys-info-table .table-active td
        {
            background-color: white
        }

        .col-form-label {
            text-align: right
        }

        .draw_picture_box {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }


    </style>
    <style>
        .sys-info-table caption{
            background-color: #cccccc;
            color: black;
            font-weight: bold;
        }
    </style>

</head>

<script src="${system_js}/jquery.min.js?v=2.1.4"></script>
<script src="https://cdn.bootcss.com/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
<script
        src="https://cdn.bootcss.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js"
        integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ"
        crossorigin="anonymous"></script>

<script src="${system_js}/magicsuggest-min.js"></script>
<script src="${system_js}/bootstrap-table.min.js"></script>
<script src="https://cdn.bootcss.com/viewerjs/1.0.0-beta.2/viewer.min.js"></script>
<script
        src="https://cdn.bootcss.com/bootstrap-table/1.11.0/locale/bootstrap-table-zh-CN.min.js"></script>
<script src="${plugins}/pagination/jquery.pagination.js"></script>
<script src="${system_js}/system.js"></script>
<script src="${plugins}/layer/layer.min.js"></script>
<script src="${system_js}/analysis/technical_common.js"></script>
<script type="text/javascript" src="${plugins}/laydate/laydate.js"></script>

<body>
<article class="content-wrap">
    <div class="container pd_h0 pd_b10" style="max-width: 100%">

        <div class="sys-plane pd_t0">
            <div class="sys-tabs">
                    <div class="form-horizontal m-t">
                        <div class="form-horizontal m-t">
                            <div class="form-group row">
                                <label class="col-sm-1 col-form-label">任务编号：</label>
                                <div class="col-sm-2">
                                    <input type="text" class="form-control"  readonly="readonly"  value="${testingSheet.code!?html}" />
                                </div>
                                <label class="col-sm-1 col-form-label">下达人：</label>
                                <div class="col-sm-2">
                                    <input type="text" class="form-control"  readonly="readonly" value="${testingSheet.testerName!?html}"/>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-sm-1 col-form-label">下达时间：</label>
                                <div class="col-sm-2">
                                    <input type="text" class="form-control"
                                           readonly="readonly" value="${(testingSheet.assignTime)?string('yyyy-MM-dd HH:mm:ss')}" />
                                </div>
                                <label class="col-sm-1 col-form-label">完成时间：</label>
                                <div class="col-sm-2">
                                    <#if testingSheet.submitTime??>
                                        <input type="text" class="form-control" value="${(testingSheet.submitTime)?string('yyyy-MM-dd HH:mm:ss')}" readonly="readonly" />
                                    <#else>
                                         <input type="text" class="form-control" value="" readonly="readonly" />
                                    </#if>
                                </div>
                            </div>
                            <div class="table-responsive">
                                <table class="table table-striped table-bordered table-hover" style="min-width: 1400px;">
                                    <thead>
                                    <tr>
                                        <th>测序编号</th>
                                        <th>样本编号</th>
                                        <th>样本名称</th>
                                        <th>营销中心</th>
                                        <th>检测产品</th>
                                        <th>客户姓名</th>
                                        <th>是否参与</th>
                                        <th>送检单位</th>
                                        <th>技术负责人</th>
                                        <th>报告日期</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <#if familyTaskList?? && familyTaskList?has_content> <#list familyTaskList as record>
                                        <tr>
                                            <td>${(record.testingSequencingCode)!?html}</td>
                                            <td>${(record.receivedSampleCode)!?html}</td>
                                            <td>${(record.receivedSampleName)!?html}</td>
                                            <td>${(record.orderMarketingCenter)!?html}</td>
                                            <td>${(record.productName)!?html}</td>
                                            <td>${(record.orderCustomerName)!?html}</td>
                                            <td><@dict_entry_text category="ANALYSIS_TYPE" value=record.orderCustomerAssist /></td>
                                            <td>${(record.orderCustomerCompany)!?html}</td>
                                            <td>${(record.productTechPrincipals)!?html}</td>
                                            <td><#if record.productReportDeadline??>${(record.productReportDeadline)!?html}</#if></td>
                                        </tr>
                                    </#list>
                                        <#else>
                                        <tr>
                                            <td colspan="14">暂无技术分析任务</td>
                                        </tr>
                                    </#if>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                <#if testingSheet.submitTime??>
                    <div class="sys-table-box" id="dataTableBox">
                        <h4>突变收藏列表</h4>
                        <table id="dataTable">
                            <thead>
                            <tr>
                                <th rowspan="2" style="width: 50px;">序号</th>
                                <th rowspan="2">加入收藏</th> <#if pagination??><#if
                                    pagination.colList?has_content><#list pagination.colList as
                                    dcol> <#if dcol=="Evidence">
                                <th class='evidence' data-field="${dcol!?html}"
                                    attr-semantic="${dcol!?html}"
                                    colspan="${pagination.senondColName['${dcol}']?size}">${dcol!?html}</th>
                                <#else>
                                    <th data-field="${dcol!?html}" attr-semantic="${dcol!?html}"
                                        rowspan="2">${dcol!?html}</th> </#if> </#list></#if></#if>
                            </tr>
                            <tr>
                                <#if pagination??><#if pagination.colList?has_content><#list
                                        pagination.colList as dcol> <#if dcol=="Evidence"> <#if
                                        pagination.senondColName?has_content><#list
                                        pagination.senondColName["${dcol}"] as secondCol>
                                    <th data-field="${secondCol}" attr-semantic="${secondCol}">${secondCol}</th>
                                </#list></#if> </#if> </#list></#if></#if>
                            </tr>
                            </thead>
                            <tbody>
                            <#if (annotateStatus??) && annotateStatus=="7">
                                <tr>
                                    <td>正在打分中...</td>
                                </tr>
                                <#else> <#if pagination??><#if
                                        pagination.dataValue?has_content><#list pagination.dataValue
                                        as dv>
                                    <tr>
                                        <td>${dv_index+1}</td>
                                        <td><img id="collection"
                                                 src="${system_images}<@if_collection id = dv['_id'] tag = 'mutation'  />"
                                                 alt="" style="height: 30px; cursor: pointer;"
                                                 onclick="mutationCollection('${dv['_id']!?html}',this)"
                                                 class="${dv['_id']!?html}" /></td> <#if
                                            pagination.colList?has_content><#list pagination.colList as
                                            dcol> <#if dcol_index == 5>
                                        <td attr-semantic="${dcol!?html}"><a class="op-btn check_method"
                                                                             href="#"
                                                                             onclick="showExampleModalLong('${dv['_id']!?html}','${system_images}<@if_collection id = dv['_id'] tag = 'mutation'  />','${dv['_id']!?html}')">${dv["${dcol!?html}"]!?html}</a></td>
                                        <#elseif dcol_index == 6>
                                            <td attr-semantic="${dcol!?html}"><a class="op-btn"
                                                                                 href="javascript:;"
                                                                                 onclick="showLeve('${dv['_id']!?html}');">${dv["${dcol!?html}"]!?html}</a></td>
                                            <#else> <#if dcol=="遗传方式" || dcol=="关联表型" || dcol=="疾病表型" ||
                                                    dcol=="疾病信息">
                                                <td attr-semantic="${dcol!?html}"
                                                    title="${dv['${dcol}']!?html}"><#if dv["${dcol}"]??>
                                                    <#if dv["${dcol}"]?length gt
                                                            20>${dv["${dcol}"]?substring(0,19)}...<#else>${dv["${dcol}"]!?html}</#if>
                                                </#if></td> <#elseif dcol=="变异信息" || dcol=="疾病与基因关联度打分" ||
                                                    dcol=="人群频率" || dcol=="蛋白功能预测">
                                                <td attr-semantic="${dcol!?html}"><a class="op-btn"
                                                                                     href="javascript:;"
                                                                                     onclick="detailsShow('${dcol}','${dv['_id']!?html}')"><#if
                                                        dv["${dcol}"]??><#if dv["${dcol}"]?length gt
                                                        20>${dv["${dcol}"]?substring(0,19)}...<#else>${dv["${dcol}"]!?html}</#if></#if></a></td>
                                                <#elseif dcol=="Evidence"> <#if
                                                        pagination.senondColName?has_content><#list
                                                        pagination.senondColName["${dcol}"] as secondCol> <#if
                                                        secondCol="HGMD">
                                                    <td attr-semantic="${secondCol}"><a class="op-btn"
                                                                                        href="javascript:;"
                                                                                        onclick="detailsShow('${secondCol}','${dv['_id']!?html}')">${dv["${secondCol}"]!?html}</a></td>
                                                    <#elseif secondCol="clinvar">
                                                        <td attr-semantic="${secondCol}"
                                                            title="${dv['${secondCol}']!?html}"><#if
                                                                dv["${secondCol}"]?has_content>${dv["${secondCol}"]?split("|")[0]!?html}...</#if></td>
                                                        <#else>
                                                            <td attr-semantic="${secondCol}">${dv["${secondCol}"]!?html}</td>
                                                </#if> </#list></#if> <#elseif dcol=="功能域">
                                                    <td attr-semantic="${dcol!?html}"
                                                        title="${dv['${dcol}']!?html}"><#if
                                                            dv["${dcol}"]?has_content>${dv["${dcol}"]?split("|")[0]!?html}...</#if></td>
                                                    <#elseif dcol=="染色体位置">
                                                        <td attr-semantic="${dcol!?html}"><#if dv["${dcol}"]??><a
                                                                href="javascript:getIgv('${dv["Chr"]}:${dv["Begin"]}-${dv["End"]!dv["Begin"]}','${dv["analysisSampleId"]!?html}')" target="_blank">${dv["${dcol}"]}</a></#if>
                                                        </td> <#else>
                                                        <td attr-semantic="${dcol!?html}" title="<#if dv['${dcol}']??>${dv['${dcol}']}</#if>"><#if dv["${dcol}"]??><#if dv["${dcol}"]?length gt 20>${dv["${dcol}"]?substring(0,19)}...<#else>${dv["${dcol}"]!?html}</#if></#if></td> </#if> </#if>
                                    </#list></#if>
                                    </tr>
                                </#list> <#else>
                                    <tr>
                                        <td>暂无收藏突变数据</td>
                                    </tr>
                                </#if></#if> </#if>

                            </tbody>
                        </table>
                    </div>  <!-- mutation -->




                    <h4 class="mr_t20">CapCnv收藏列表</h4>
                    <!-- capnCnv收藏数据 -->
                    <#if capcnv?size != 0>
                        <#list capcnv as cnvAnalysisPicResultList>
                            <div class="sys-plane">
                                <#if cnvAnalysisPicResultList.cnvAnalysisPic??>
                                    <div class="chart-box" >
                                        <div class="draw_picture_box">
                                            <img src="${cnvAnalysisPicResultList.cnvAnalysisPic.imageUrl!?html}"  alt=""
                                                 class="chart-img">
                                        </div>
                                        <div class="chart-op-box">
                                            <p>${cnvAnalysisPicResultList.cnvAnalysisPic.clinicalJudgment!?html}</p>
                                            <img
                                                    src="${system_images}<@if_collection id = cnvAnalysisPicResultList.cnvAnalysisPic.id tag = 'cnvPic'  />"
                                                    alt="" style="height: 30px; cursor: pointer;"
                                                    onclick="collectionCapcnvPic('${cnvAnalysisPicResultList.cnvAnalysisPic.id!?html}','pic',this)">
                                        </div>
                                    </div>
                                </#if>

                                <div class="sys-table-box mr_t20 writeResult">
                                    <table class="sys-table dyTable">
                                        <thead>
                                        <tr>
                                            <th>加入收藏</th>
                                            <th>是否进行家系分析实验</th>
                                            <th>家系实验方法</th>
                                            <th>验证样本</th>
                                            <th>缺失重复类型</th>
                                            <th>基因</th>
                                            <th>致病性分级</th>
                                            <th>染色体位置</th>
                                            <th>外显子</th>
                                            <th>遗传来源</th>
                                            <th>关联疾病</th>
                                            <th>遗传方式</th>

                                        </tr>
                                        </thead>
                                        <tbody>
                                        <#if cnvAnalysisPicResultList.collectionCnvAnalysisResult?? > <#list
                                                cnvAnalysisPicResultList.collectionCnvAnalysisResult as record>

                                            <tr>
                                                <td><img  class="collectionbtn" id="img_${record.id!?html}"  src="${system_images}<@if_collection id = record.id tag = 'cnvResult'  />"
                                                          data-toggle="modal" alt="" style="cursor: pointer;" onclick="cnvCollection('${record.technicalAnalyRecordId!?html}','result',this)"></td>
                                                <td>${record.isFamilyAnalysis!?html}</td>
                                                <td>${record.familyMethod!?html}</td>
                                                <td>${record.verifySample!?html}</td>
                                                <td>${record.clinicalJudgment!?html}</td>
                                                <td>${record.gene!?html}</td>
                                                <td>${record.pathogenicLevel!?html}</td>
                                                <td>${record.missingArea!?html}</td>
                                                <td>${record.exon!?html}</td>
                                                <td>${record.inheritSource!?html}</td>
                                                <td>${record.relatedDisease!?html}</td>
                                                <td>${record.inhert!?html}</td>
                                            </tr>
                                        </#list>

                                        </#if>
                                        </tbody>
                                    </table>
                                </div>

                            </div>   <!-- capcnv -->
                        </#list>
                        <#else>
                            <div class="pd_v20"> 暂无收藏CapCNV数据</div>
                    </#if>


                    <h4>补提列表</h4>
                    <div class="bootstrap-table">
                        <table class="sys-table "  >
                            <thead>
                            <tr>
                                <th>序号</th>
                                <th>临床相关性判断</th>
                                <th>染色体</th>
                                <th>位置1</th>
                                <th>位置2</th>
                                <th>基因</th>
                                <th>核苷酸</th>
                                <th>氨基酸</th>
                                <th>纯和/杂合</th>
                                <th>验证方法</th>
                                <th>验证样本</th>

                            </tr>
                            </thead>
                            <tbody>
                            <#if addVerifyData??  && addVerifyData?has_content >
                                <#list	addVerifyData as record>

                                    <tr>
                                        <td>${record_index+1}</td>
                                        <td>${record.clinicalJudgment!?html}</td>
                                        <td>${record.chrom!?html}</td>
                                        <td>${record.startLocation!?html}</td>
                                        <td>${record.endLocation!?html}</td>
                                        <td>${record.gene!?html}</td>
                                        <td>${record.nucleotide!?html}</td>
                                        <td>${record.aminoAcid!?html}</td>
                                        <td>${record.pure!?html}</td>
                                        <td>${record.verifyMethod!?html}</td>
                                        <td>${record.verifySamplerCodeRelation!?html}</td>
                                    </tr>
                                </#list>
                                <#else>
                                    <tr>
                                        <td colspan="16">暂无数据</td>
                                    </tr>
                            </#if>
                            </tbody>
                        </table>
                    </div>
                    </#if>

                </div>
                <!-- <div class="sys-tabs-cot"></div>
                <div class="sys-tabs-cot"></div>
                <div class="sys-tabs-cot"></div> -->
            </div>
        </div>
</article>


<!-- 分组列Modal -->
<div class="modal fade" id="detailsModal" tabindex="-2" role="dialog"
     aria-labelledby="" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="detailsModalLabel">突变</h5>
                <button type="button" class="close" data-dismiss="modal"
                        aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body txt_l">
                <form action="">
                    <div class="form-group row mr_b0" id="detailsModalDiv">
                        <div class="col-sm-12"></div>
                    </div>
                </form>
            </div>

        </div>
    </div>
</div>



<div class="modal fade" id="exampleModalLong" tabindex="-3"
     role="dialog" aria-labelledby="" aria-hidden="true">
    <div class="modal-dialog" role="document" style="min-width: 80%;">
        <div class="modal-content">
            <div class="modal-header">


                <button type="button" class="close" data-dismiss="modal"
                        aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="">
                    <table class="sys-info-table">
                        <caption class="caption">变异信息汇总</caption>
                        <thead>
                        <tr>
                            <th>ACMG致病性分级</th>
                            <th>Mygeno_InterACMG</th>
                            <th>基因</th>
                            <th>染色体位置</th>
                            <th>变异信息</th>
                            <th>纯合/杂合</th>
                            <th>测序深度</th>
                            <th>突变频率</th>
                            <th>dbSNP</th>
                        </tr>
                        </thead>
                        <tbody>

                        <tr>
                            <td class="inner" id="tag1"></td>
                            <td class="inner" id="tag2"></td>
                            <td class="inner" id="tag3"></td>
                            <td class="inner" id="tag4"></td>
                            <td class="inner" id="tag5"></td>
                            <td class="inner" id="tag6"></td>
                            <td class="inner" id="tag7"></td>
                            <td class="inner" id="tag8"></td>
                            <td class="inner" id="tag9"></td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div class="mr_t20">
                    <table class="sys-info-table">
                        <caption class="caption">ACMG致病性分级证据</caption>
                        <tbody id="tag51">

                        </tbody>
                    </table>
                </div>
                <div class="mr_t20">
                    <table class="sys-info-table">
                        <caption class="caption">家系携带信息</caption>
                        <tbody>
                        <tr>
                            <td class="table-active">变异来源</td>
                            <td colspan="7" class="pt-2 pb-2"><label for=""
                                                                     class="mb-0 mr-2 " id="tag33">未知</label> <!-- 										<button type="button" class="btn btn-secondary" -->
                                <!-- 											style="font-size: inherit; padding: .125rem .375rem;">验证该位点</button> -->
                            </td>
                        </tr>
                        <tr>
                            <td class="table-active">先证者父亲</td>
                            <td class="inner" id="tag10"></td>
                            <td class="table-active">测序深度</td>
                            <td class="inner" id="tag11"></td>
                            <td class="table-active">先证者母亲</td>
                            <td class="inner" id="tag12"></td>
                            <td class="table-active">测序深度</td>
                            <td class="inner" id="tag13"></td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div class="mr_t20">
                    <table class="sys-info-table">
                        <caption class="caption">疾病表型关联度打分</caption>
                        <tbody>
                        <tr>
                            <td class="table-active" style="width: 12.5%;">Phenolyzer</td>
                            <td style="width: 20%;" class="inner" id="tag14"></td>
                            <td class="table-active" style="width: 12.5%;">EXOMISER</td>
                            <td class="inner" id="tag15"></td>
                            <td class="table-active" style="width: 12.5%;">Total_Score</td>
                            <td class="inner" id="tag16"></td>
                        </tr>
                        <tr>
                            <td class="table-active">先证者临床表型</td>
                            <td colspan="5" class="inner" id="tag50"></td>
                        </tr>
                        <tr class="table-active">
                            <td colspan="2">关联疾病|遗传方式</td>
                            <td colspan="2">疾病信息</td>
                            <td colspan="2">疾病表型</td>
                        </tr>
                        <tr>
                            <td colspan="2" class="inner" id="tag17"></td>
                            <td colspan="2" class="inner" id="tag18"></td>
                            <td colspan="2" class="inner" id="tag19"></td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div class="mr_t20">
                    <table class="sys-info-table">
                        <caption class="caption">正常人频率</caption>
                        <tbody>
                        <tr class="table-active">
                            <td>Highest-MAF</td>
                            <td>Inhouse</td>
                            <td>esp6500si</td>
                            <td>1000g2015aug_all</td>
                            <td>ExAC_ALL</td>

                        </tr>
                        <tr>
                            <td class="inner" id="tag20"></td>
                            <td class="inner" id="tag21"></td>
                            <td class="inner" id="tag22"></td>
                            <td class="inner" id="tag23"></td>
                            <td class="inner" id="tag24"></td>

                        </tr>

                        <tr class="table-active">

                            <td>ExAC_EAS</td>
                            <td>gnomAD_ALL</td>
                            <td>gnomAD_exome_EAS</td>
                            <td>gnomAD_genome_ALL</td>
                            <td>gnomAD_genome_EAS</td>
                        </tr>
                        <tr>

                            <td class="inner" id="tag25"></td>
                            <td class="inner" id="tag26"></td>
                            <td class="inner" id="tag52"></td>
                            <td class="inner" id="tag53"></td>
                            <td class="inner" id="tag54"></td>
                        </tr>


                        </tbody>
                    </table>
                </div>
                <div class="mr_t20">
                    <table class="sys-info-table">
                        <caption class="caption">Evidence</caption>
                        <tbody>
                        <tr>
                            <td class="table-active">HGMD</td>
                            <td id="tag55"></td>
                            <td id="tag56"></td>
                            <td id="tag57"></td>
                            <td id="tag58"></td>
                        </tr>
                        <tr>
                            <td class="table-active">ClinVar</td>
                            <td colspan="4" class="inner" id="tag34"></td>
                        </tr>
                        <tr>
                            <td class="table-active">InterVar</td>
                            <td colspan="4" class="inner" id="tag35"></td>
                        </tr>
                        <tr>
                            <td class="table-active">MutInDatabase</td>
                            <td colspan="4" class="inner" id="tag36"></td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div class="mr_t20">
                    <table class="sys-info-table">
                        <caption class="caption">蛋白功能预测</caption>
                        <tbody>
                        <tr class="table-active">
                            <td>SIFT</td>
                            <td>Polyphen2</td>
                            <td>MutationTaster</td>
                            <td>GERP++</td>
                            <td>MCAP</td>
                            <td>SPIDEX</td>
                        </tr>
                        <tr>
                            <td class="inner" id="tag27"></td>
                            <td class="inner" id="tag28"></td>
                            <td class="inner" id="tag29"></td>
                            <td class="inner" id="tag30"></td>
                            <td class="inner" id="tag31"></td>
                            <td class="inner" id="tag32"></td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <!--<div class="modal-footer">-->
            <!--<div class="txt_c ub-f1">-->
            <!--<button type="button" class="btn btn-primary" data-dismiss="modal" style="width: 150px; margin-right: 50px;">筛选</button>-->
            <!--<button type="button" class="btn btn-outline-primary" style="width: 150px;">重置筛选</button>-->
            <!--</div>-->
            <!--</div>-->
        </div>
    </div>
</div>



<div class="modal fade" id="level" tabindex="-3" role="dialog"
     aria-labelledby="" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLongTitle">
                    <button class="btn btn-outline-secondary btn-sm">Mygeno_InterACMG证据清单</button>
                </h5>



                <button type="button" class="close" data-dismiss="modal"
                        aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="mr_t20" style="height: 400px; overflow: auto">


                    <table class="sys-info-table">
                        <tbody>
                        <input type="hidden" id="mongoId" value="">
                        <tr class="table-active" id="evidenceDetail">
                            <td>致病性证据</td>
                            <td>证据说明</td>
                            <td>个数</td>

                        </tr>
                        <@dict_entries category="INTERACMG">
                        <#list entries as entry>
                            <tr>
                                <td class="evidence" >${entry.value!?html}</td>
                                <td class="desc"><input type="text" readonly="readonly"	class="form-control sys-input desc" value=""></td>
                                <td class="inner"><input type="text" readonly="readonly" class="form-control sys-input evidenceValue" value="" style="width: 50px"></td>
                            </tr>

                        </#list>
                        </@dict_entries>


                        </tbody>
                    </table>
                </div>
            </div>

        </div>
    </div>
</div>


<div class="modal fade" id="report_dialog" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content animated bounceInRight"
             style="width: 550px; margin-left: 160px; margin-top: 100px;">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">异常上报</h4>
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span> <span class="sr-only">关闭</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div>
                        <form action="#" method="post" class="search-form form-inline" id="report_form">
                            <input type="hidden" id="taskId" name="taskId"/>

                            <div style="width: 450px;" style="float: left">
                                <#if familyTaskList?has_content>
                                    <#list familyTaskList as task>
                                        <div class="form-group">
                                            <label class="control-label">${task.testingAnalyDataCode!?html}：</label>
                                            <input type="checkbox" name="reportState" value="${task.id!?html}"/> 上报
                                        </div>
                                        <br>
                                    </#list>
                                </#if>
                                <div class="form-group">
                                    <label class="control-label">备注原因：</label>
                                    <textarea class="form-control" id="remark" name="remark" rows="3"
                                              cols="45"></textarea>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" id="operate_button">确定</button>
                    <button type="button" class="btn btn-white" data-dismiss="modal">取消</button>
                </div>
            </div>
        </div>
    </div>
</div>




</body>
<script>
    var PATH = '${base}';
    var analysisSampleId = '${analysisSampleId!?html}';




    function showLoading() {
        console.log(1);
        var loadindex = parent.layer.load();
    }

    function getIgv(location,mongoId){

        var url = 'http://60.205.205.23:55000/pages/index.html';

        var json = {};
        var family=[];
        json.Location = location;
        $.ajax({
            type : "GET",
            url : PATH + "/testing/getFamilyAnnotate.jsp",
            data : {
                mongoId : mongoId
            },
            dataType : "json",
            success : function(data) {
                $.each(data,function(i,o){
                    var d =  {};
                    d.sampleNum = o.dataCode;
                    d.BAM_url = o.bamBam;
                    d.VCF_url = o.vcfDmdexon;
                    family.push(d)

                });
                json.IGV = family;
                window.open(url+"?data="+JSON.stringify(json),"_blank");
            }

        })

    }

    function add(){
        var addTemp = $("#addTemp").html();
        $('#addObject').append(addTemp);
    }
    function deleteObj(obj){
        $(obj).parent().parent().remove();
    }

    $(".draw_picture_box").each(function(){
        new Viewer(this);
    });

    $('#operate_button').on('click', function () {
        var id_array = new Array();
        $('input[name="reportState"]:checked').each(function () {
            id_array.push($(this).val());//向数组中添加元素
        });
        var reportState = id_array.join(',');//将数组元素连接起来以构建一个字符串
        console.log(reportState + "~~~");
        var remark = $('#remark').val();
        if ('' == reportState || typeof(reportState) == "undefined") {
            parent.parent.layer.alert('请至少选择一个样本是否上报', {title: "提示"});
            return false;
        } else {
            var loadindex = layer.load();
            $.ajax({
                type: "POST",
                traditional: true,
                url: '${base}/testing/technicalReportOperate.do',
                data: {
                    reportState: reportState,
                    remark: remark
                },
                async: false,
                success: function (data) {
                    $('#operate_dialog').modal('hide');
                    parent.layer.confirm('操作成功,即将闭当前页面', {
                            btn: ['确定']
                        }, function (index) {
                            setTimeout(function () {
                                window.close()
                            }, 500);
                        }, function (index) {
                            setTimeout(function () {
                                window.close()
                            }, 500);
                        }
                    );

                },
                error: function () {
                    alert("failed");
                }
            });
        }
    });
</script>
<script src="${system_js}/analysis/analysis.js"></script>
<script src="${system_js}/analysis/mutation.js"></script>
</html>

