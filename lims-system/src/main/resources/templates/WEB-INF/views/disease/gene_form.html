<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="renderer" content="webkit">
<meta http-equiv="Cache-Control" content="no-siteapp" />
<title>添加基因</title>
<link href="${system_css}/bootstrap.min14ed.css?v=3.3.6"
	rel="stylesheet">
<link href="${system_css}/font-awesome.min93e3.css?v=4.4.0"
	rel="stylesheet">
<link href="${system_css}/animate.min.css" rel="stylesheet">
<link href="${system_css}/style.min862f.css?v=4.1.0" rel="stylesheet">
<link href="${system_css}/lims.css?v=4.1.0" rel="stylesheet">
<link href="${system_css}/magicsuggest-min.css" rel="stylesheet">

<link rel="stylesheet" href="${plugins}/ladda-bootstrap-master/dist/ladda-themeless.min.css">

</head>
<body class="gray-bg">
	<div class="wrapper wrapper-content animated fadeInRight">
		<div class="row">
			<div class="col-lg-12">
				<div class="ibox">
					<div class="ibox-title">
						<ol class="breadcrumb">
							<li><a href="#">基因管理</a></li>
							<li class="active"><strong>${(flag)!?html}基因</strong></li>
						</ol>
					</div>
				</div>
				<div class="ibox">
					<div class="ibox-title">
						<strong>${(flag)!?html}基因</strong>
					</div>
					<div class="ibox-content">
						
						<form id="createform" class="form-horizontal m-t" action="${base}/disease/addDiseaseGene.do" method="post" >
							<input type="hidden" name="id" id="id" value="${(entity.id)!?html}" /> 
							<input type="hidden" name="aliasJson" id="aliasJson" value="" />
							<fieldset>
								<div class="form-group">
								
									<label class="col-sm-2 control-label control-required">基因OMIM号：</label>
									<div class="col-sm-3">
										<input type="text" class="form-control" name="code"
											id="code" value="${(entity.code)!?html}" />
									</div>
									<label class="col-sm-2 control-label control-required">基因名称：</label>
									<div class="col-sm-3">
										<input type="text" class="form-control" name="symbol"
											id="symbol" value="${(entity.symbol)!?html}" />
									</div>

								</div>

								<div class="form-group">

									<label class="col-sm-2 control-label control-required">基因全名：</label>
									<div class="col-sm-3">
										<input type="text" class="form-control" name="name"
											id="name" value="${(entity.name)!?html}" />
									</div>
									<label class="col-sm-2 control-label ">Uniport ID：</label>
									<div class="col-sm-3">
										<input type="text" class="form-control" name="uniportId"
											id="uniportId" value="${(entity.uniportId)!?html}" />
									</div>
									

								</div>
								
								<div class="form-group">
									<label class="col-sm-2 control-label ">外显子数：</label>
									<div class="col-sm-3">
										<input type="text" class="form-control" name="exonCount"
											id="exonCount" value="${(entity.exonCount)!?html}" />
									</div>
									<label class="col-sm-2 control-label ">内含子数：</label>
									<div class="col-sm-3">
										<input type="text" class="form-control" name="intronCount"
											id="intronCount" value="${(entity.intronCount)!?html}" />
									</div>
									

								</div>
								<div class="form-group">
									<label class="col-sm-2 control-label ">NM号：</label>
									<div class="col-sm-3">
										<input type="text" class="form-control" name="exomeNo"
											id="exome_no" value="${(entity.exomeNo)!?html}" />
									</div>
									<label class="col-sm-2 control-label ">染色体区域：</label>
									<div class="col-sm-3">
										<input type="text" class="form-control" name="chromosomalLocation"
											id="chromosomal_location" value="${(entity.chromosomalLocation)!?html}" />
									</div>
									
								</div>
								
								
								<div class="form-group"  ms-controller="test">
									<label class="col-sm-2 control-label ">添加别名：</label>
									<div class="col-sm-6">
										  <table id="tab" class="table table-striped table-bordered table-hover">
										   <thead>
									        <tr>
									            <td class=" col-sm-2">序号</td>
									            <td class=" col-sm-3">基因名称</td>
									            <td class=" col-sm-3">全称</td>
									            <td class=" col-sm-2">操作</td>
									       </tr>
									       <tr  ms-for="(index,el) in @inputLists">
									       	 	<td class=" col-sm-2">{{index+1}}</td> 
									            <td class=" col-sm-2"><input class='form-control' type='text' ms-duplex-string="el.symbol"/></td>
									            <td class=" col-sm-2"><input class='form-control' type='text'  ms-duplex-string="el.name"/></td>
									            <td class=" col-sm-2"><a href='#' ms-click="@remove(e,index)" >-删除</a></td>
									            
									       </tr>
									       </thead>
									    </table>
									 </div>
								    <div class="col-sm-2">
									        <input type="button" id="but" class="btn btn-primary" value="增加" ms-click="@add(e)"/>
								 	</div>
								
								</div>
								
								<div class="form-group">
									<label class="col-sm-2 control-label ">Missense/nonsense：</label>
									<div class="col-sm-3">
										<input type="text" class="form-control sum" name="missenseNonsense"
											id="missenseNonsense" value="${(entity.missenseNonsense)!?html}" />
									</div>
									<label class="col-sm-2 control-label ">Splicing：</label>
									<div class="col-sm-3">
										<input type="text" class="form-control sum" name="splicing"
											id="splicing" value="${(entity.splicing)!?html}" />
									</div>
									
								</div>
								<div class="form-group">
									<label class="col-sm-2 control-label ">Regulatory：</label>
									<div class="col-sm-3">
										<input type="text" class="form-control sum" name="regulatory"
											id="regulatory" value="${(entity.regulatory)!?html}" />
									</div>
									<label class="col-sm-2 control-label ">Small deletions：</label>
									<div class="col-sm-3">
										<input type="text" class="form-control sum" name="smallDeletions"
											id="smallDeletions" value="${(entity.smallDeletions)!?html}" />
									</div>
									
								</div>
								<div class="form-group">
									<label class="col-sm-2 control-label ">Small insertions：</label>
									<div class="col-sm-3">
										<input type="text" class="form-control sum" name="smallInsertions"
											id="smallInsertions" value="${(entity.smallInsertions)!?html}" />
									</div>
									<label class="col-sm-2 control-label ">Small indels：</label>
									<div class="col-sm-3">
										<input type="text" class="form-control sum" name="smallIndels"
											id="smallIndels" value="${(entity.smallIndels)!?html}" />
									</div>
									
								</div>
								<div class="form-group">
									<label class="col-sm-2 control-label ">Gross deletions：</label>
									<div class="col-sm-3">
										<input type="text" class="form-control sum" name="grossDeletions"
											id="grossDeletions" value="${(entity.grossDeletions)!?html}" />
									</div>
									<label class="col-sm-2 control-label ">Gross insertions/duplications：</label>
									<div class="col-sm-3">
										<input type="text" class="form-control sum" name="grossInsertionsDuplications"
											id="grossInsertionsDuplications" value="${(entity.grossInsertionsDuplications)!?html}" />
									</div>
									
								</div>
								<div class="form-group">
									<label class="col-sm-2 control-label ">Complex rearrangements：</label>
									<div class="col-sm-3">
										<input type="text" class="form-control sum" name="complexRearrangements"
											id="complexRearrangements" value="${(entity.complexRearrangements)!?html}" />
									</div>
									<label class="col-sm-2 control-label ">Repeat variations：</label>
									<div class="col-sm-3">
										<input type="text" class="form-control sum" name="repeatVariations"
											id="repeatVariations" value="${(entity.repeatVariations)!?html}" />
									</div>
									
								</div>
								<div class="form-group">
									<label class="col-sm-2 control-label ">Public total：</label>
									<div class="col-sm-3">
										<input type="text" class="form-control" name="publicTotal"
											id="publicTotal" value="" readonly="readonly" />
									</div>
									
								</div>
								
							<div class="form-group">
								<div class="col-sm-4 col-sm-offset-2">
									<input  class="btn btn-primary"  type="submit" value="保存" />
									<button class="btn btn-primary goback" type="button" >返回</button>
								</div>
								<div class="col-sm-4 col-sm-offset-2"></div>
								<div class="col-sm-4 col-sm-offset-2"></div>
							</div>
						</fieldset>
						</form>
						
						
					</div>
				</div>
			</div>
		</div>
	</div>
	
</body>

<script type="text/javascript" src="${system_js}/jquery.min.js?v=2.1.4"></script>
<script type="text/javascript" src="${plugins}/jstree/jstree.min.js"></script>
<script type="text/javascript" src="${system_js}/bootstrap.min.js"></script>
<script type="text/javascript" src="${system_js}/system.js"></script>
<script src="${system_js}/bootstrap-suggest.js"></script>
<script src="${plugins}/pagination/jquery.pagination.js"></script>
<script src="${system_js}/magicsuggest-min.js"></script>

<!-- 表单验证 -->
<script type="text/javascript" src="${plugins}/validation/jquery.validate.min.js"></script>
<script type="text/javascript" src="${plugins}/validation/additional-methods.min.js"></script>
<script type="text/javascript" src="${plugins}/validation/localization/messages_zh.min.js"></script>
<script type="text/javascript" src="${system_js}/myValidate.js"></script>

<script type="text/javascript" src="${system_js}/avalon.js"></script>

<script src="${plugins}/ladda-bootstrap-master/dist/spin.min.js"></script>
<script src="${plugins}/ladda-bootstrap-master/dist/ladda.min.js"></script>


<script type="text/javascript">

$(function () {
	var initSum =0;
	var area = $(".sum");
	for(i=0;i<area.length;i++){
		initSum += parseInt(area[i].value*1); 
	}
	$("#publicTotal").val(initSum);
	
	$("input").keyup(function(){
		var sum =0;
		var area = $(".sum");
		for(i=0;i<area.length;i++){
			sum += parseInt(area[i].value*1); 
		}
		$("#publicTotal").val(sum);
	});
	
	
	var vm;
	var inputArrs =[];
	<#if aliasList??>
		inputArrs = ${aliasList};
	</#if>

	var task = function () {
		this.symbol="";
		this.name="";
		
	};		
	vm = avalon.define({
		$id: "test",
		inputLists:inputArrs,
		add: function (e) {
			this.inputLists.push(new task()); 
		},
		remove:function(e,index){
			this.inputLists.splice(index,1);
		}
	});  
	
	$("#createform").validate({
        submitHandler:function(form){
    		$("#aliasJson").val(JSON.stringify(vm.inputLists.$model));
    		//var l = Ladda.create(this);l.start();
            form.submit();
            /* setTimeout(function(){l.stop();},2000);  */
        },
   		 rules: {
   			code:{
  				 required:true,
  				 remote: {
        		    url: "${base}/disease/validateGeneCode.do",
        		    type: "post",               
        		    dataType: "json",          
        		    data: {
        		    	symbol : function() {
        		            return $("#code").val();
        		        },
        		        id:function() {
        		            return $("#id").val();
        		        }
        		    }
        		} 
  			},
   			symbol:{
  				 required:true,
  				 remote: {
        		    url: "${base}/disease/validateGeneName.do",
        		    type: "post",               
        		    dataType: "json",          
        		    data: {
        		    	symbol : function() {
        		            return $("#symbol").val();
        		        },
        		        id:function() {
        		            return $("#id").val();
        		        }
        		    }
        		} 
  			},
  			exonCount:{
  				digits:true
  			},
  			intronCount:{
  				digits:true
  			},
   			name:{
  				 required:true,
  			},
  			missenseNonsense:{
  				digits:true
  			},
  			splicing:{
  				digits:true			
			},
			regulatory:{
				digits:true			
			},
			mallDeletions:{
				digits:true			
			},
			smallInsertions:{
				digits:true			
			},
			smallIndels:{
				digits:true			
			},
			grossDeletions:{
				digits:true			
  			},
  			grossInsertionsDuplications:{
  				digits:true
  			},
  			complexRearrangements:{
  				digits:true
  			},
  			repeatVariations:{
  				digits:true
  			},
   		 },
   		 messages:{
   			code:{
  				 required:"请填写编号！",
  				 remote:"编号已存在"
  			},
   			symbol:{
   				 required:"请填写名称！",
   				 remote:"基因名称已存在"
   			},
   			name:{
   				 required:"请填写全称！",
   			},
   			exonCount:{
   				digits:"请填写正确数据！",
   			},
   			intronCount:{
   				digits:"请填写正确数据！",
   			}
   			
   		 }
   		
   	});
	
	
	
	
	

})




	
</script>
    
</html>




</html>
